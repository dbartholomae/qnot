(this.webpackJsonpqnot=this.webpackJsonpqnot||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),i=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(42),s=n(14);var l=n(27),j=n(28),d=n(25),u=n(151);var b={id:Object(u.a)(),name:function(e){var t;return null!==(t=localStorage.getItem("qnot/".concat(e)))&&void 0!==t?t:null}("name")},m=Object(j.b)({name:"me",initialState:b,reducers:{setName:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{name:t.payload})}}}),O=function(e){return e.me.name},h=function(e){return e.me.id},f=m.actions.setName,v=m.reducer,p=function(){return Object(l.b)()},x=l.c;function y(){var e=x(O),t=p();return[e,function(e){var n,a;n="name",a=e,localStorage.setItem("qnot/".concat(n),a),t(f(e))}]}var C=n(44),w=function e(t){var n=t.id,a=void 0===n?Object(u.a)():n,r=t.name,o=t.isOnline;Object(C.a)(this,e),this.id=void 0,this.name=void 0,this.isOnline=void 0,this.name=r,this.isOnline=o,this.id=a},g=n(12),S=Object(j.b)({name:"players",initialState:{},reducers:{addOrUpdatePlayer:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},Object(g.a)({},n.id,n))},markPlayerOffline:function(e,t){var n=t.payload;void 0!==e[n]&&(e[n].isOnline=!1)}}}),R=S.actions,P=R.addOrUpdatePlayer,V=R.markPlayerOffline,_=function(e){return Object.values(e.players)},E=S.reducer;var I=Object(j.b)({name:"roomSettings",initialState:{isHost:!1},reducers:{setHost:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{isHost:t.payload})}}}),A=I.actions.setHost,H=function(e){return function(e){return e.roomSettings}(e).isHost},L=I.reducer;var N=n(11),T=n(140),k=n(40),B=n(65),D=n.n(B);function M(){return D()(3).join("-")}function q(e){return"/room/".concat(e)}var J=n(60),W=n(150),K=n(136),U=n(153),Y=n(137),F=n(139),G=n(138),Q=n(4);function $(){var e=Object(s.g)().push,t=function(){var e=Object(a.useState)((function(){return M()}));return Object(N.a)(e,1)[0]}(),n=new URLSearchParams(Object(s.h)().search),r=p(),o=n.get("roomCode"),i=Object(a.useState)(null!==o&&void 0!==o?o:t),c=Object(N.a)(i,2),l=c[0],j=c[1];return Object(Q.jsxs)("form",{onSubmit:function(t){t.preventDefault(),r(A(!0)),e(q(l))},style:{display:"flex",gap:12},children:[Object(Q.jsx)(W.a,{autoComplete:"off",autoFocus:!0,id:"roomCode",label:J.MainView.roomCodeLabel,value:l,variant:"standard",InputProps:{endAdornment:Object(Q.jsx)(K.a,{position:"end",children:Object(Q.jsx)(U.a,{title:J.MainView.generateNewRoomCode,children:Object(Q.jsx)(Y.a,{"aria-label":J.MainView.generateNewRoomCode,onClick:function(){return j(M())},children:Object(Q.jsx)(G.a,{})})})}),readOnly:!0}}),Object(Q.jsx)(F.a,{type:"submit",variant:"contained",color:"primary",children:J.MainView.createRoom})]})}function z(){var e=y(),t=Object(N.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(null!==n&&void 0!==n?n:""),i=Object(N.a)(o,2),c=i[0],s=i[1];return Object(Q.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(c)},style:{display:"flex",gap:12},children:[Object(Q.jsx)(W.a,{autoComplete:"off",id:"name",label:J.MainView.nameLabel,value:c,variant:"filled",onChange:function(e){return s(e.target.value)}}),Object(Q.jsx)(F.a,{type:"submit",variant:"contained",color:"primary",children:J.MainView.saveName})]})}function X(){var e=y(),t=Object(N.a)(e,1)[0];return Object(Q.jsxs)(T.a,{children:[Object(Q.jsxs)(k.a,{variant:"h3",gutterBottom:!0,children:["Hi ",null!==t&&void 0!==t?t:"there","!"]}),Object(Q.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[Object(Q.jsx)(z,{}),t&&Object(Q.jsx)($,{})]})]})}n(95);function Z(e){return void 0===e?"/":"/?roomCode=".concat(e)}var ee=J.JoinRoomView,te=function(e){var t=e.roomCode,n=y(),a=Object(N.a)(n,1)[0];return Object(Q.jsxs)(T.a,{children:[Object(Q.jsx)(k.a,{variant:"h3",gutterBottom:!0,children:ee.heading}),Object(Q.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",flexDirection:"column",gap:12},children:[Object(Q.jsx)(z,{}),a&&Object(Q.jsx)(F.a,{color:"primary",variant:"contained",component:c.b,to:q(t),children:ee.joinGame})]})]})};function ne(e){return"/invite/".concat(e)}var ae=n(148),re=n(134),oe=n(135),ie=n(149),ce=n(68),se=n(141),le=n(142),je=n(145),de=n(146),ue=n(143),be=n(144),me=n(147),Oe=function(e){var t=e.player,n=t.name,a=t.isOnline,r=e.isHost;return Object(Q.jsxs)(se.a,{children:[Object(Q.jsx)(le.a,{children:a?Object(Q.jsx)(ue.a,{"aria-label":J.RoomView.online}):Object(Q.jsx)(be.a,{"aria-label":J.RoomView.offline,color:"error"})}),Object(Q.jsx)(je.a,{primary:n}),r&&Object(Q.jsx)(de.a,{children:Object(Q.jsx)(U.a,{title:J.RoomView.host,children:Object(Q.jsx)(me.a,{"aria-label":J.RoomView.host})})})]})},he=Object(a.createContext)(void 0);function fe(e){var t=Object(l.d)();Object(a.useEffect)((function(){!function(e,t){var n=function(e){t.dispatch(P(new w({id:e.clientId,name:e.data.name,isOnline:!0})))};e.presence.subscribe("enter",n),e.presence.subscribe("present",n),e.presence.subscribe("leave",(function(e){t.dispatch(V(e.clientId))}))}(e,t)}),[e,t])}var ve=function(e){var t=e.roomCode,n=x(h),r=y(),o=Object(N.a)(r,1)[0],i=x(_),c=Object(a.useContext)(he),s=Object(a.useState)((function(){return c(t)})),l=Object(N.a)(s,1)[0];return fe(l),Object(a.useEffect)((function(){return l.presence.enterClient(n,{name:o}),function(){return l.presence.leaveClient(n)}}),[l,n,o]),Object(Q.jsxs)(T.a,{children:[Object(Q.jsxs)(ae.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(Q.jsx)(ae.a,{item:!0,children:Object(Q.jsx)(k.a,{variant:"h3",gutterBottom:!0,children:"Room"})}),Object(Q.jsx)(ae.a,{item:!0,children:Object(Q.jsx)(ce.CopyToClipboard,{text:"".concat("/qnot").concat(ne(t)),children:Object(Q.jsx)(F.a,{variant:"contained",color:"primary",children:J.RoomView.copyInviteLink})})})]}),Object(Q.jsx)(re.a,{children:Object(Q.jsx)(oe.a,{subheader:Object(Q.jsx)(ie.a,{children:J.RoomView.playersListHeader}),children:i.map((function(e){return Object(Q.jsx)(Oe,{player:e,isHost:!0},e.name)}))})})]})};function pe(e){var t=e.roomCode,n=y(),a=Object(N.a)(n,1)[0],r=x(H);return null===a?r?Object(Q.jsx)(s.a,{to:Z(t)}):Object(Q.jsx)(s.a,{to:ne(t)}):Object(Q.jsx)(ve,{roomCode:t})}function xe(){return Object(Q.jsxs)(s.d,{children:[Object(Q.jsx)(s.b,{path:q(":roomCode"),children:function(e){var t=e.match;return Object(Q.jsx)(pe,{roomCode:t.params.roomCode})}}),Object(Q.jsx)(s.b,{path:ne(":roomCode"),children:function(e){var t=e.match;return Object(Q.jsx)(te,{roomCode:t.params.roomCode})}}),Object(Q.jsx)(s.b,{path:Z(),children:Object(Q.jsx)(X,{})})]})}var ye=function(e){var t=e.children,n=e.channelCreator;return Object(Q.jsx)(he.Provider,{value:n,children:t})},Ce=n(69),we=n.n(Ce),ge=Object({NODE_ENV:"production",PUBLIC_URL:"/qnot",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ABLY_API_KEY;if("string"!==typeof ge||""===ge)throw new TypeError("No Ably API key set in env var REACT_APP_ABLY_API_KEY");var Se=new we.a.Realtime(ge).channels,Re=Se.get.bind(Se),Pe=function(){return Object(Q.jsx)(ye,{channelCreator:Re,children:Object(Q.jsx)(c.a,{basename:"/qnot",children:Object(Q.jsx)(l.a,{store:Object(j.a)({reducer:{me:v,players:E,roomSettings:L}}),children:Object(Q.jsx)(xe,{})})})})};i.a.render(Object(Q.jsx)(r.a.StrictMode,{children:Object(Q.jsx)(Pe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e){e.exports=JSON.parse('{"MainView":{"generateNewRoomCode":"Generate new room code","nameLabel":"Name","saveName":"Save name","roomCodeLabel":"Room code","createRoom":"Create room"},"RoomView":{"copyInviteLink":"Copy invite link","host":"This is the host","offline":"offline","online":"online","playersListHeader":"Players"},"JoinRoomView":{"heading":"Welcome to Qnot!","joinGame":"Join game"}}')}},[[103,1,2]]]);
//# sourceMappingURL=main.e9bfae24.chunk.js.map