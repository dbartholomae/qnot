(this.webpackJsonpqnot=this.webpackJsonpqnot||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(10),i=n.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(42),s=n(14);var l=n(27),j=n(28),u=n(25),d=n(151);function b(e,t){return localStorage.setItem("qnot/".concat(e),t),t}function m(e){var t;return null!==(t=localStorage.getItem("qnot/".concat(e)))&&void 0!==t?t:null}var O={id:function(){var e;return null!==(e=m("id"))&&void 0!==e?e:b("id",Object(d.a)())}(),name:m("name")},h=Object(j.b)({name:"me",initialState:O,reducers:{setName:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{name:t.payload})}}}),f=function(e){return e.me.name},v=function(e){return e.me.id},x=h.actions.setName,p=h.reducer,y=function(){return Object(l.b)()},w=l.c;function C(){var e=w(f),t=y();return[e,function(e){b("name",e),t(x(e))}]}var g=n(44),R=function e(t){var n=t.id,a=void 0===n?Object(d.a)():n,o=t.name,r=t.isOnline;Object(g.a)(this,e),this.id=void 0,this.name=void 0,this.isOnline=void 0,this.name=o,this.isOnline=r,this.id=a},S=n(12),V=Object(j.b)({name:"players",initialState:{},reducers:{addOrUpdatePlayer:function(e,t){var n=t.payload;return Object(u.a)(Object(u.a)({},e),{},Object(S.a)({},n.id,n))},markPlayerOffline:function(e,t){var n=t.payload;void 0!==e[n]&&(e[n].isOnline=!1)}}}),k=V.actions,H=k.addOrUpdatePlayer,I=k.markPlayerOffline,L=function(e){return Object.values(e.players)},M=V.reducer;var N=Object(j.b)({name:"roomSettings",initialState:{isHost:!1},reducers:{setHost:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{isHost:t.payload})}}}),P=N.actions.setHost,q=function(e){return function(e){return e.roomSettings}(e).isHost},J=N.reducer;var B=n(11),E=n(140),D=n(40),G=n(65),U=n.n(G);function W(){return U()(3).join("-")}function A(e){return"/room/".concat(e)}var Q=n(60),T=n(150),z=n(136),F=n(153),K=n(137),Y=n(139),Z=n(138),$=n(4);function X(){var e=Object(s.g)().push,t=function(){var e=Object(a.useState)((function(){return W()}));return Object(B.a)(e,1)[0]}(),n=new URLSearchParams(Object(s.h)().search),o=y(),r=n.get("roomCode"),i=Object(a.useState)(null!==r&&void 0!==r?r:t),c=Object(B.a)(i,2),l=c[0],j=c[1];return Object($.jsxs)("form",{onSubmit:function(t){t.preventDefault(),o(P(!0)),e(A(l))},style:{display:"flex",gap:12},children:[Object($.jsx)(T.a,{autoComplete:"off",autoFocus:!0,id:"roomCode",label:Q.MainView.roomCodeLabel,value:l,variant:"standard",InputProps:{endAdornment:Object($.jsx)(z.a,{position:"end",children:Object($.jsx)(F.a,{title:Q.MainView.generateNewRoomCode,children:Object($.jsx)(K.a,{"aria-label":Q.MainView.generateNewRoomCode,onClick:function(){return j(W())},children:Object($.jsx)(Z.a,{})})})}),readOnly:!0}}),Object($.jsx)(Y.a,{type:"submit",variant:"contained",color:"primary",children:Q.MainView.createRoom})]})}function _(){var e=C(),t=Object(B.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(null!==n&&void 0!==n?n:""),i=Object(B.a)(r,2),c=i[0],s=i[1];return Object($.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(c)},style:{display:"flex",gap:12},children:[Object($.jsx)(T.a,{autoComplete:"off",id:"name",label:Q.MainView.nameLabel,value:c,variant:"filled",onChange:function(e){return s(e.target.value)}}),Object($.jsx)(Y.a,{type:"submit",variant:"contained",color:"primary",children:Q.MainView.saveName})]})}function ee(){var e=C(),t=Object(B.a)(e,1)[0];return Object($.jsxs)(E.a,{children:[Object($.jsxs)(D.a,{variant:"h3",gutterBottom:!0,children:["Hi ",null!==t&&void 0!==t?t:"there","!"]}),Object($.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[Object($.jsx)(_,{}),t&&Object($.jsx)(X,{})]})]})}n(95);function te(e){return void 0===e?"/":"/?roomCode=".concat(e)}var ne=Q.JoinRoomView,ae=function(e){var t=e.roomCode,n=C(),a=Object(B.a)(n,1)[0];return Object($.jsxs)(E.a,{children:[Object($.jsx)(D.a,{variant:"h3",gutterBottom:!0,children:ne.heading}),Object($.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",flexDirection:"column",gap:12},children:[Object($.jsx)(_,{}),a&&Object($.jsx)(Y.a,{color:"primary",variant:"contained",component:c.b,to:A(t),children:ne.joinGame})]})]})};function oe(e){return"/invite/".concat(e)}var re=n(148),ie=n(134),ce=n(135),se=n(149),le=n(68),je=n(141),ue=n(142),de=n(145),be=n(146),me=n(143),Oe=n(144),he=n(147),fe=function(e){var t=e.player,n=t.name,a=t.isOnline,o=e.isHost;return Object($.jsxs)(je.a,{children:[Object($.jsx)(ue.a,{children:a?Object($.jsx)(me.a,{"aria-label":Q.RoomView.online}):Object($.jsx)(Oe.a,{"aria-label":Q.RoomView.offline,color:"error"})}),Object($.jsx)(de.a,{primary:n}),o&&Object($.jsx)(be.a,{children:Object($.jsx)(F.a,{title:Q.RoomView.host,children:Object($.jsx)(he.a,{"aria-label":Q.RoomView.host})})})]})},ve=Object(a.createContext)(void 0);function xe(e){var t=Object(l.d)();Object(a.useEffect)((function(){!function(e,t){var n=function(e){t.dispatch(H(new R({id:e.clientId,name:e.data.name,isOnline:!0})))};e.presence.subscribe("enter",n),e.presence.subscribe("present",n),e.presence.subscribe("leave",(function(e){t.dispatch(I(e.clientId))}))}(e,t)}),[e,t])}var pe=function(e){var t,n=e.roomCode,o=w(v),r=C(),i=Object(B.a)(r,1)[0],c=w(L),s=Object(a.useContext)(ve),l=Object(a.useState)((function(){return s(n)})),j=Object(B.a)(l,1)[0];return xe(j),Object(a.useEffect)((function(){return j.presence.enterClient(o,{name:i}),function(){return j.presence.leaveClient(o)}}),[j,o,i]),Object($.jsxs)(E.a,{children:[Object($.jsxs)(re.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object($.jsx)(re.a,{item:!0,children:Object($.jsx)(D.a,{variant:"h3",gutterBottom:!0,children:"Room"})}),Object($.jsx)(re.a,{item:!0,children:Object($.jsx)(le.CopyToClipboard,{text:(t=oe(n),"".concat(window.location.protocol,"//").concat(window.location.host).concat("/qnot").concat(t)),children:Object($.jsx)(Y.a,{variant:"contained",color:"primary",children:Q.RoomView.copyInviteLink})})})]}),Object($.jsx)(ie.a,{children:Object($.jsx)(ce.a,{subheader:Object($.jsx)(se.a,{children:Q.RoomView.playersListHeader}),children:c.map((function(e){return Object($.jsx)(fe,{player:e,isHost:!0},e.name)}))})})]})};function ye(e){var t=e.roomCode,n=C(),a=Object(B.a)(n,1)[0],o=w(q);return null===a?o?Object($.jsx)(s.a,{to:te(t)}):Object($.jsx)(s.a,{to:oe(t)}):Object($.jsx)(pe,{roomCode:t})}function we(){return Object($.jsxs)(s.d,{children:[Object($.jsx)(s.b,{path:A(":roomCode"),children:function(e){var t=e.match;return Object($.jsx)(ye,{roomCode:t.params.roomCode})}}),Object($.jsx)(s.b,{path:oe(":roomCode"),children:function(e){var t=e.match;return Object($.jsx)(ae,{roomCode:t.params.roomCode})}}),Object($.jsx)(s.b,{path:te(),children:Object($.jsx)(ee,{})})]})}var Ce=function(e){var t=e.children,n=e.channelCreator;return Object($.jsx)(ve.Provider,{value:n,children:t})},ge=n(69),Re="1Zn4jA.zjaEkg:uIdkQyluCE5HfYMK";var Se=new(n.n(ge).a.Realtime)(Re).channels,Ve=Se.get.bind(Se),ke=function(){return Object($.jsx)(Ce,{channelCreator:Ve,children:Object($.jsx)(c.a,{basename:"/qnot",children:Object($.jsx)(l.a,{store:Object(j.a)({reducer:{me:p,players:M,roomSettings:J}}),children:Object($.jsx)(we,{})})})})};i.a.render(Object($.jsx)(o.a.StrictMode,{children:Object($.jsx)(ke,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e){e.exports=JSON.parse('{"MainView":{"generateNewRoomCode":"Generate new room code","nameLabel":"Name","saveName":"Save name","roomCodeLabel":"Room code","createRoom":"Create room"},"RoomView":{"copyInviteLink":"Copy invite link","host":"This is the host","offline":"offline","online":"online","playersListHeader":"Players"},"JoinRoomView":{"heading":"Welcome to Qnot!","joinGame":"Join game"}}')}},[[103,1,2]]]);
//# sourceMappingURL=main.b86647a8.chunk.js.map