(this.webpackJsonpqnot=this.webpackJsonpqnot||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(10),i=n.n(r);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(42),s=n(14);var l=n(27),j=n(28),d=n(25),u=n(151);var b={id:Object(u.a)(),name:function(e){var t;return null!==(t=localStorage.getItem("qnot/".concat(e)))&&void 0!==t?t:null}("name")},m=Object(j.b)({name:"me",initialState:b,reducers:{setName:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{name:t.payload})}}}),O=function(e){return e.me.name},h=function(e){return e.me.id},f=m.actions.setName,v=m.reducer,x=function(){return Object(l.b)()},p=l.c;function y(){var e=p(O),t=x();return[e,function(e){var n,a;n="name",a=e,localStorage.setItem("qnot/".concat(n),a),t(f(e))}]}var w=n(44),C=function e(t){var n=t.id,a=void 0===n?Object(u.a)():n,o=t.name,r=t.isOnline;Object(w.a)(this,e),this.id=void 0,this.name=void 0,this.isOnline=void 0,this.name=o,this.isOnline=r,this.id=a},g=n(12),R=Object(j.b)({name:"players",initialState:{},reducers:{addOrUpdatePlayer:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},Object(g.a)({},n.id,n))},markPlayerOffline:function(e,t){var n=t.payload;void 0!==e[n]&&(e[n].isOnline=!1)}}}),S=R.actions,V=S.addOrUpdatePlayer,k=S.markPlayerOffline,H=function(e){return Object.values(e.players)},I=R.reducer;var L=Object(j.b)({name:"roomSettings",initialState:{isHost:!1},reducers:{setHost:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{isHost:t.payload})}}}),M=L.actions.setHost,N=function(e){return function(e){return e.roomSettings}(e).isHost},P=L.reducer;var q=n(11),J=n(140),B=n(40),E=n(65),D=n.n(E);function G(){return D()(3).join("-")}function U(e){return"/room/".concat(e)}var W=n(60),A=n(150),Q=n(136),T=n(153),z=n(137),F=n(139),K=n(138),Y=n(4);function Z(){var e=Object(s.g)().push,t=function(){var e=Object(a.useState)((function(){return G()}));return Object(q.a)(e,1)[0]}(),n=new URLSearchParams(Object(s.h)().search),o=x(),r=n.get("roomCode"),i=Object(a.useState)(null!==r&&void 0!==r?r:t),c=Object(q.a)(i,2),l=c[0],j=c[1];return Object(Y.jsxs)("form",{onSubmit:function(t){t.preventDefault(),o(M(!0)),e(U(l))},style:{display:"flex",gap:12},children:[Object(Y.jsx)(A.a,{autoComplete:"off",autoFocus:!0,id:"roomCode",label:W.MainView.roomCodeLabel,value:l,variant:"standard",InputProps:{endAdornment:Object(Y.jsx)(Q.a,{position:"end",children:Object(Y.jsx)(T.a,{title:W.MainView.generateNewRoomCode,children:Object(Y.jsx)(z.a,{"aria-label":W.MainView.generateNewRoomCode,onClick:function(){return j(G())},children:Object(Y.jsx)(K.a,{})})})}),readOnly:!0}}),Object(Y.jsx)(F.a,{type:"submit",variant:"contained",color:"primary",children:W.MainView.createRoom})]})}function $(){var e=y(),t=Object(q.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(null!==n&&void 0!==n?n:""),i=Object(q.a)(r,2),c=i[0],s=i[1];return Object(Y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(c)},style:{display:"flex",gap:12},children:[Object(Y.jsx)(A.a,{autoComplete:"off",id:"name",label:W.MainView.nameLabel,value:c,variant:"filled",onChange:function(e){return s(e.target.value)}}),Object(Y.jsx)(F.a,{type:"submit",variant:"contained",color:"primary",children:W.MainView.saveName})]})}function X(){var e=y(),t=Object(q.a)(e,1)[0];return Object(Y.jsxs)(J.a,{children:[Object(Y.jsxs)(B.a,{variant:"h3",gutterBottom:!0,children:["Hi ",null!==t&&void 0!==t?t:"there","!"]}),Object(Y.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[Object(Y.jsx)($,{}),t&&Object(Y.jsx)(Z,{})]})]})}n(95);function _(e){return void 0===e?"/":"/?roomCode=".concat(e)}var ee=W.JoinRoomView,te=function(e){var t=e.roomCode,n=y(),a=Object(q.a)(n,1)[0];return Object(Y.jsxs)(J.a,{children:[Object(Y.jsx)(B.a,{variant:"h3",gutterBottom:!0,children:ee.heading}),Object(Y.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",flexDirection:"column",gap:12},children:[Object(Y.jsx)($,{}),a&&Object(Y.jsx)(F.a,{color:"primary",variant:"contained",component:c.b,to:U(t),children:ee.joinGame})]})]})};function ne(e){return"/invite/".concat(e)}var ae=n(148),oe=n(134),re=n(135),ie=n(149),ce=n(68),se=n(141),le=n(142),je=n(145),de=n(146),ue=n(143),be=n(144),me=n(147),Oe=function(e){var t=e.player,n=t.name,a=t.isOnline,o=e.isHost;return Object(Y.jsxs)(se.a,{children:[Object(Y.jsx)(le.a,{children:a?Object(Y.jsx)(ue.a,{"aria-label":W.RoomView.online}):Object(Y.jsx)(be.a,{"aria-label":W.RoomView.offline,color:"error"})}),Object(Y.jsx)(je.a,{primary:n}),o&&Object(Y.jsx)(de.a,{children:Object(Y.jsx)(T.a,{title:W.RoomView.host,children:Object(Y.jsx)(me.a,{"aria-label":W.RoomView.host})})})]})},he=Object(a.createContext)(void 0);function fe(e){var t=Object(l.d)();Object(a.useEffect)((function(){!function(e,t){var n=function(e){t.dispatch(V(new C({id:e.clientId,name:e.data.name,isOnline:!0})))};e.presence.subscribe("enter",n),e.presence.subscribe("present",n),e.presence.subscribe("leave",(function(e){t.dispatch(k(e.clientId))}))}(e,t)}),[e,t])}var ve=function(e){var t,n=e.roomCode,o=p(h),r=y(),i=Object(q.a)(r,1)[0],c=p(H),s=Object(a.useContext)(he),l=Object(a.useState)((function(){return s(n)})),j=Object(q.a)(l,1)[0];return fe(j),Object(a.useEffect)((function(){return j.presence.enterClient(o,{name:i}),function(){return j.presence.leaveClient(o)}}),[j,o,i]),Object(Y.jsxs)(J.a,{children:[Object(Y.jsxs)(ae.a,{container:!0,justify:"space-between",alignItems:"center",children:[Object(Y.jsx)(ae.a,{item:!0,children:Object(Y.jsx)(B.a,{variant:"h3",gutterBottom:!0,children:"Room"})}),Object(Y.jsx)(ae.a,{item:!0,children:Object(Y.jsx)(ce.CopyToClipboard,{text:(t=ne(n),"".concat(window.location.protocol,"//").concat(window.location.host).concat("/qnot").concat(t)),children:Object(Y.jsx)(F.a,{variant:"contained",color:"primary",children:W.RoomView.copyInviteLink})})})]}),Object(Y.jsx)(oe.a,{children:Object(Y.jsx)(re.a,{subheader:Object(Y.jsx)(ie.a,{children:W.RoomView.playersListHeader}),children:c.map((function(e){return Object(Y.jsx)(Oe,{player:e,isHost:!0},e.name)}))})})]})};function xe(e){var t=e.roomCode,n=y(),a=Object(q.a)(n,1)[0],o=p(N);return null===a?o?Object(Y.jsx)(s.a,{to:_(t)}):Object(Y.jsx)(s.a,{to:ne(t)}):Object(Y.jsx)(ve,{roomCode:t})}function pe(){return Object(Y.jsxs)(s.d,{children:[Object(Y.jsx)(s.b,{path:U(":roomCode"),children:function(e){var t=e.match;return Object(Y.jsx)(xe,{roomCode:t.params.roomCode})}}),Object(Y.jsx)(s.b,{path:ne(":roomCode"),children:function(e){var t=e.match;return Object(Y.jsx)(te,{roomCode:t.params.roomCode})}}),Object(Y.jsx)(s.b,{path:_(),children:Object(Y.jsx)(X,{})})]})}var ye=function(e){var t=e.children,n=e.channelCreator;return Object(Y.jsx)(he.Provider,{value:n,children:t})},we=n(69),Ce="1Zn4jA.zjaEkg:uIdkQyluCE5HfYMK";var ge=new(n.n(we).a.Realtime)(Ce).channels,Re=ge.get.bind(ge),Se=function(){return Object(Y.jsx)(ye,{channelCreator:Re,children:Object(Y.jsx)(c.a,{basename:"/qnot",children:Object(Y.jsx)(l.a,{store:Object(j.a)({reducer:{me:v,players:I,roomSettings:P}}),children:Object(Y.jsx)(pe,{})})})})};i.a.render(Object(Y.jsx)(o.a.StrictMode,{children:Object(Y.jsx)(Se,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e){e.exports=JSON.parse('{"MainView":{"generateNewRoomCode":"Generate new room code","nameLabel":"Name","saveName":"Save name","roomCodeLabel":"Room code","createRoom":"Create room"},"RoomView":{"copyInviteLink":"Copy invite link","host":"This is the host","offline":"offline","online":"online","playersListHeader":"Players"},"JoinRoomView":{"heading":"Welcome to Qnot!","joinGame":"Join game"}}')}},[[103,1,2]]]);
//# sourceMappingURL=main.9179ea7e.chunk.js.map